[
  {
    "id": "feat:rage",
    "class": "Barbarian",
    "name": "Rage",
    "level": 1,
    "description": "In battle, you fight with primal ferocity. On your turn, you can enter a rage as a bonus action.",
    "mechanics": [
      {
        "type": "bonus_action",
        "requirements": [
          {
            "type": "equipment",
            "slot": "armor",
            "property": ["Heavy"],
            "negate": true
          }
        ],
        "duration": {
          "value": 1,
          "unit": "minutes",
          "sustain": ["damage", "damaged_by"],
          "until": [
            {
              "event": ["status_applied"],
              "status": {
                "name": "unconscious"
              }
            },
            {
              "event": ["status_removed"],
              "action": "voluntary"
            }
          ]
        },
        "effects": [
          {
            "apply_status": {
              "id": "status:raging"
            }
          },
          {
            "damage_bonus": {
              "dice": "scaling.damage_bonus"
            },
            "trigger": {
              "event": ["damage"],
              "source": {
                "type": ["melee", "weapon"],
                "ability": ["Strength"]
              }
            }
          }
        ],
        "scaling": {
          "components": {
            "damage_bonus": {
              "by_level": {
                "1": 2,
                "9": 3,
                "16": 4
              }
            },
            "uses": {
              "by_level": {
                "1": 2,
                "3": 3,
                "6": 4,
                "12": 5,
                "17": 6,
                "20": null
              }
            }
          }
        },
        "limit": {
          "scaling": "uses"
        },
        "recharge": "long_rest"
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:unarmored-defense",
    "class": "Barbarian",
    "name": "Unarmored Defense",
    "level": 1,
    "description": "While you are not wearing any armor, your armor class equals 10 + your Dexterity modifier + your Constitution modifier. You can use a shield and still gain this benefit.",
    "mechanics": [
      {
        "type": "passive",
        "requirements": [
          {
            "type": "equipment",
            "slot": "armor",
            "occupied": false
          }
        ],
        "effects": [
          {
            "attribute": {
              "target": "armor_class",
              "calculation": {
                "operation": "set",
                "operators": [
                  {
                    "type": "integer",
                    "value": 10
                  },
                  {
                    "type": "ability_modifier",
                    "ability": "Dexterity"
                  },
                  {
                    "type": "ability_modifier",
                    "ability": "Constitution"
                  }
                ]
              }
            }
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:danger-sense",
    "class": "Barbarian",
    "name": "Danger Sense",
    "level": 2,
    "description": "You gain an uncanny sense of when things nearby aren't as they should be, giving you an edge when you dodge away from danger.",
    "mechanics": [
      {
        "type": "passive",
        "effects": [
          {
            "advantage": {
              "saving_throw": ["Dexterity"],
              "requirements": [
                {
                  "type": "perception",
                  "observer": "character",
                  "subject": "source",
                  "senses": ["sight"]
                }
              ]
            }
          }
        ],
        "requirements": [
          {
            "type": "status",
            "value": "blinded",
            "negate": true
          },
          {
            "type": "status",
            "value": "deafened",
            "negate": true
          },
          {
            "type": "status",
            "value": "incapacitated",
            "negate": true
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:reckless-attack",
    "class": "Barbarian",
    "name": "Reckless Attack",
    "level": 2,
    "description": "You can throw aside all concern for defense to attack with fierce desperation.",
    "mechanics": [
      {
        "type": "advantage",
        "trigger": {
          "event": ["attack"],
          "source": {
            "type": ["melee", "weapon"],
            "ability": ["Strength"]
          }
        },
        "effects": [
          {
            "advantage": {
              "attack": "melee",
              "duration": {
                "value": 1,
                "unit": "turns"
              }
            }
          },
          {
            "advantage": {
              "attack": "all",
              "target": {
                "type": "attackers"
              },
              "duration": {
                "until": ["start_turn"]
              }
            }
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:primal-path",
    "class": "Barbarian",
    "level": 3,
    "name": "Primal Path",
    "description": "At 3rd level, you choose a path that shapes the nature of your rage.",
    "mechanics": [
      {
        "type": "choice",
        "choice_type": "subclass"
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:primal-knowledge",
    "class": "Barbarian",
    "name": "Primal Knowledge",
    "level": 3,
    "description": "You gain proficiency in one skill of your choice from the list of skills available to barbarians at 1st level.",
    "mechanics": [
      {
        "type": "choice",
        "choice_type": "skill",
        "count": 1,
        "options": [
          {
            "type": "simple",
            "name": "Animal Handling"
          },
          {
            "type": "simple",
            "name": "Athletics"
          },
          {
            "type": "simple",
            "name": "Intimidation"
          },
          {
            "type": "simple",
            "name": "Nature"
          },
          {
            "type": "simple",
            "name": "Perception"
          },
          {
            "type": "simple",
            "name": "Survival"
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:ability-score-improvement",
    "class": "Barbarian",
    "level": [4, 8, 12, 16, 19],
    "name": "Ability Score Improvement",
    "description": "Increase one ability score by 2 or two ability scores by 1 or one feat",
    "mechanics": [
      {
        "type": "choice",
        "options": [
          {
            "type": "nested",
            "name": "Increase Ability Scores",
            "choice": {
              "choice_type": "ability_score",
              "count": 2,
              "value": {
                "operation": "add",
                "operators": [
                  {
                    "type": "integer",
                    "value": 1
                  }
                ]
              }
            }
          },
          {
            "type": "nested",
            "name": "Gain a Feat",
            "choice": {
              "choice_type": "feat",
              "count": 1
            }
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:extra-attack",
    "class": "Barbarian",
    "name": "Extra Attack",
    "level": 5,
    "description": "You can attack twice, instead of once, whenever you take the Attack action on your turn.",
    "mechanics": [
      {
        "type": "extra_attack",
        "scaling": {
          "components": {
            "attacks": {
              "by_level": {
                "5": 2
              }
            }
          }
        }
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:fast-movement",
    "class": "Barbarian",
    "name": "Fast Movement",
    "level": 5,
    "description": "Your speed increases by 10 feet while you aren't wearing heavy armor.",
    "mechanics": [
      {
        "type": "passive",
        "requirements": [
          {
            "type": "equipment",
            "slot": "armor",
            "property": ["Heavy"],
            "negate": true
          }
        ],
        "effects": [
          {
            "attribute": {
              "target": "movement.base",
              "calculation": {
                "operation": "add",
                "operators": [
                  {
                    "type": "integer",
                    "value": 10
                  }
                ]
              }
            }
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:feral-instinct",
    "class": "Barbarian",
    "name": "Feral Instinct",
    "level": 7,
    "description": "Your instincts are so honed that you have advantage on initiative rolls. Additionally, if you are surprised at the beginning of combat and aren't incapacitated, you can act normally on your first turn, but only if you enter your rage before doing anything else on that turn.",
    "mechanics": [
      {
        "type": "passive",
        "effects": [
          {
            "advantage": {
              "initiative": true
            }
          }
        ]
      },
      {
        "type": "immunity",
        "trigger": {
          "event": ["combat_start"],
          "condition": {
            "type": "status",
            "value": "surprised"
          }
        },
        "requirements": [
          {
            "type": "status",
            "value": "incapacitated",
            "negate": true
          }
        ],
        "effects": [
          {
            "negate": ["surprised"],
            "grants": {
              "name": "Rage",
              "interaction": {
                "name": "Rage",
                "activation": "bonus_action",
                "order": "first"
              }
            }
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:instinctive-pounce",
    "class": "Barbarian",
    "name": "Instinctive Pounce",
    "level": 7,
    "description": "As part of the bonus action you take to enter your rage, you can move up to half your speed.",
    "mechanics": [
      {
        "type": "movement",
        "trigger": {
          "event": ["status_applied"],
          "status": {
            "name": "raging"
          }
        },
        "effects": [
          {
            "attribute": {
              "target": "movement.base",
              "calculation": {
                "operation": "add",
                "operators": [
                  {
                    "type": "function",
                    "function": "movement.calculate_half_speed",
                    "context": "character"
                  }
                ]
              }
            }
          }
        ]
      }
    ],
    "source": "tce",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:brutal-critical",
    "class": "Barbarian",
    "name": "Brutal Critical",
    "level": 9,
    "description": "You can roll one additional weapon damage die when determining the extra damage for a critical hit with a melee attack.",
    "mechanics": [
      {
        "type": "critical_hit",
        "trigger": {
          "event": ["hit"],
          "source": {
            "type": ["melee"]
          }
        },
        "effects": [
          {
            "damage_bonus": {
              "dice": "scaling.extra_dice",
              "inherit_type": true
            }
          }
        ],
        "scaling": {
          "components": {
            "extra_dice": {
              "by_level": {
                "9": 1,
                "13": 2,
                "17": 3
              }
            }
          }
        }
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:relentless-rage",
    "class": "Barbarian",
    "name": "Relentless Rage",
    "level": 11,
    "description": "Your rage can keep you fighting despite grievous wounds. If you drop to 0 hit points while you're raging and don't die outright, you can make a DC 10 Constitution saving throw. If you succeed, you drop to 1 hit point instead. Each time you use this feature after the first, the DC increases by 5. When you finish a short or long rest, the DC resets to 10.",
    "mechanics": [
      {
        "type": "passive",
        "trigger": {
          "event": ["damaged_by"]
        },
        "requirements": [
          {
            "type": "status",
            "value": "raging"
          },
          {
            "type": "attribute",
            "attribute": "hit_points.current",
            "comparison": "equals",
            "value": 0
          },
          {
            "type": "status",
            "value": "dead",
            "negate": true
          }
        ],
        "effects": [
          {
            "saving_throw": {
              "ability": "Constitution",
              "dc": {
                "base": 10,
                "per_use": 5
              },
              "on_success": {
                "attribute": {
                  "target": "hit_points.current",
                  "calculation": {
                    "operation": "set",
                    "operators": [
                      {
                        "type": "integer",
                        "value": 1
                      }
                    ]
                  }
                }
              }
            }
          }
        ],
        "recharge": "short_rest"
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:persistent-rage",
    "class": "Barbarian",
    "name": "Persistent Rage",
    "level": 15,
    "description": "Your rage is so fierce that it ends early only if you fall unconscious or if you choose to end it.",
    "enhances": "Rage",
    "mechanics": [
      {
        "type": "passive",
        "duration": {
          "value": 1,
          "unit": "minutes",
          "until": [
            {
              "event": ["status_applied"],
              "status": {
                "name": "unconscious"
              }
            },
            {
              "event": ["status_removed"],
              "action": "voluntary"
            }
          ]
        }
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:indomitable-might",
    "class": "Barbarian",
    "name": "Indomitable Might",
    "level": 18,
    "description": "If your total for a Strength check is less than your Strength score, you can use that score in place of the total.",
    "mechanics": [
      {
        "type": "passive",
        "trigger": {
          "event": ["ability_check"]
        },
        "requirements": [
          {
            "type": "ability_check",
            "ability": "Strength"
          }
        ],
        "effects": [
          {
            "calculation": {
              "operation": "max",
              "operators": [
                {
                  "type": "roll_result"
                },
                {
                  "type": "attribute",
                  "value": "ability_scores.Strength.score"
                }
              ]
            }
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  },
  {
    "id": "feat:primal-champion",
    "class": "Barbarian",
    "name": "Primal Champion",
    "level": 20,
    "description": "You embody the power of the wilds. Your Strength and Constitution scores increase by 4. Your maximum for those scores is now 24.",
    "mechanics": [
      {
        "type": "passive",
        "effects": [
          {
            "attribute": {
              "target": "ability_scores.Strength.score",
              "calculation": {
                "operation": "add",
                "operators": [
                  {
                    "type": "integer",
                    "value": 4
                  }
                ]
              }
            }
          },
          {
            "attribute": {
              "target": "ability_scores.Strength.maximum",
              "calculation": {
                "operation": "set",
                "operators": [
                  {
                    "type": "integer",
                    "value": 24
                  }
                ]
              }
            }
          },
          {
            "attribute": {
              "target": "ability_scores.Constitution.score",
              "calculation": {
                "operation": "add",
                "operators": [
                  {
                    "type": "integer",
                    "value": 4
                  }
                ]
              }
            }
          },
          {
            "attribute": {
              "target": "ability_scores.Constitution.maximum",
              "calculation": {
                "operation": "set",
                "operators": [
                  {
                    "type": "integer",
                    "value": 24
                  }
                ]
              }
            }
          }
        ]
      }
    ],
    "source": "phb",
    "ruleset": "dnd5e"
  }
]
