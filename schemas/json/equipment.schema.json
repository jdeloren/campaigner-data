{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "D&D 5e Equipment",
  "type": "array",
  "items": {
    "description": "Equipment item including weapons, armor, and adventuring gear.\n\nThis is a unified model where weapon-specific and armor-specific\nfields are optional. The type field determines what fields are relevant.",
    "properties": {
      "name": {
        "description": "Equipment name",
        "title": "Name",
        "type": "string"
      },
      "cost": {
        "anyOf": [
          {
            "$ref": "common.schema.json#/$defs/CurrencyCost"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Cost with currency, or null for DM-discretion pricing"
      },
      "weight": {
        "anyOf": [
          {
            "type": "number"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weight in pounds",
        "title": "Weight"
      },
      "source": {
        "$ref": "common.schema.json#/$defs/Source",
        "description": "Source book"
      },
      "ruleset": {
        "$ref": "common.schema.json#/$defs/Ruleset",
        "description": "Ruleset version"
      },
      "type": {
        "description": "Equipment type",
        "title": "Type",
        "type": "string"
      },
      "category": {
        "$ref": "#/$defs/EquipmentCategory",
        "description": "Equipment category"
      },
      "subcategory": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Equipment subcategory",
        "title": "Subcategory"
      },
      "description": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Item description",
        "title": "Description"
      },
      "is_focus": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Can be used as spell focus",
        "title": "Is Focus"
      },
      "damage": {
        "anyOf": [
          {
            "$ref": "common.schema.json#/$defs/Damage"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weapon damage"
      },
      "properties": {
        "anyOf": [
          {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weapon properties (e.g., 'finesse', 'thrown (20/60)')",
        "title": "Properties"
      },
      "armor_class": {
        "anyOf": [
          {
            "$ref": "#/$defs/ArmorClass"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Armor AC calculation"
      },
      "hp": {
        "anyOf": [
          {
            "type": "integer"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Hit points of the item",
        "title": "HP"
      },
      "requirements": {
        "anyOf": [
          {
            "items": {
              "$ref": "#/$defs/Requirement"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Requirements for using this equipment (e.g., minimum Strength for heavy armor)",
        "title": "Requirements"
      },
      "capacity": {
        "anyOf": [
          {
            "items": {
              "$ref": "#/$defs/Capacity"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Container capacity",
        "title": "Capacity"
      },
      "contents": {
        "anyOf": [
          {
            "items": {
              "$ref": "#/$defs/PackItem"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Items contained in this pack",
        "title": "Contents"
      },
      "stealth_disadvantage": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Stealth disadvantage",
        "title": "Stealth Disadvantage"
      },
      "mechanics": {
        "anyOf": [
          {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Item mechanics",
        "title": "Mechanics"
      }
    },
    "required": [
      "name",
      "source",
      "ruleset",
      "type",
      "category"
    ],
    "title": "Equipment",
    "type": "object"
  },
  "$defs": {
    "ArmorClass": {
      "description": "Armor AC calculation",
      "properties": {
        "base": {
          "description": "Base AC value",
          "title": "Base",
          "type": "integer"
        },
        "dex_bonus": {
          "default": true,
          "description": "Whether Dex applies",
          "title": "Dex Bonus",
          "type": "boolean"
        },
        "max_dex_bonus": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Max Dex bonus",
          "title": "Max Dex Bonus"
        }
      },
      "required": [
        "base"
      ],
      "title": "ArmorClass",
      "type": "object"
    },
    "EquipmentCategory": {
      "description": "High-level equipment categories for filtering.",
      "enum": [
        "weapon",
        "armor",
        "adventuring_gear",
        "container",
        "focus"
      ],
      "title": "EquipmentCategory",
      "type": "string"
    },
    "Capacity": {
      "description": "A single capacity measurement for a container.",
      "properties": {
        "amount": {
          "description": "Capacity amount",
          "title": "Amount",
          "type": "number"
        },
        "unit": {
          "description": "Unit of measurement (e.g., 'cubic_foot', 'lb', 'gallons')",
          "title": "Unit",
          "type": "string"
        }
      },
      "required": [
        "amount",
        "unit"
      ],
      "title": "Capacity",
      "type": "object"
    },
    "Requirement": {
      "description": "A requirement for using this equipment.",
      "properties": {
        "type": {
          "description": "Type of requirement",
          "enum": [
            "ability_score",
            "level",
            "class_level",
            "proficiency",
            "feature",
            "race",
            "spellcasting",
            "special"
          ],
          "title": "Type",
          "type": "string"
        },
        "ability": {
          "anyOf": [
            {
              "enum": [
                "Strength",
                "Dexterity",
                "Constitution",
                "Intelligence",
                "Wisdom",
                "Charisma"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Ability score (for ability_score requirements)",
          "title": "Ability"
        },
        "minimum": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Minimum value required",
          "title": "Minimum"
        },
        "target": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Target of the requirement",
          "title": "Target"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Human-readable description of the requirement",
          "title": "Description"
        }
      },
      "required": [
        "type"
      ],
      "title": "Requirement",
      "type": "object"
    },
    "PackItem": {
      "description": "An item contained in an equipment pack, with its canonical name and quantity.",
      "properties": {
        "item": {
          "description": "Canonical equipment name matching an entry in equipment.json or tools.json",
          "title": "Item",
          "type": "string"
        },
        "quantity": {
          "description": "Number of this item included in the pack",
          "title": "Quantity",
          "type": "integer",
          "minimum": 1
        }
      },
      "required": ["item", "quantity"],
      "title": "PackItem",
      "type": "object"
    }
  }
}
