{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "D&D 5e Equipment",
  "type": "array",
  "items": {
    "description": "Equipment item including weapons, armor, and adventuring gear.\n\nThis is a unified model where weapon-specific and armor-specific\nfields are optional. The type field determines what fields are relevant.",
    "properties": {
      "name": {
        "description": "Equipment name",
        "title": "Name",
        "type": "string"
      },
      "cost": {
        "$ref": "#/$defs/CurrencyCost",
        "description": "Cost with currency"
      },
      "weight": {
        "anyOf": [
          {
            "type": "number"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weight in pounds",
        "title": "Weight"
      },
      "source": {
        "$ref": "#/$defs/Source",
        "description": "Source book"
      },
      "ruleset": {
        "$ref": "#/$defs/Ruleset",
        "description": "Ruleset version"
      },
      "type": {
        "description": "Equipment type",
        "title": "Type",
        "type": "string"
      },
      "category": {
        "$ref": "#/$defs/EquipmentCategory",
        "description": "Equipment category"
      },
      "subcategory": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Equipment subcategory",
        "title": "Subcategory"
      },
      "description": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Item description",
        "title": "Description"
      },
      "is_focus": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Can be used as spell focus",
        "title": "Is Focus"
      },
      "damage": {
        "anyOf": [
          {
            "$ref": "#/$defs/Damage"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weapon damage"
      },
      "properties": {
        "anyOf": [
          {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weapon properties (e.g., 'finesse', 'thrown (20/60)')",
        "title": "Properties"
      },
      "armor_class": {
        "anyOf": [
          {
            "$ref": "#/$defs/ArmorClass"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Armor AC calculation"
      },
      "strength_requirement": {
        "anyOf": [
          {
            "type": "integer"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Minimum strength requirement",
        "title": "Strength Requirement"
      },
      "stealth": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Stealth disadvantage indicator",
        "title": "Stealth"
      },
      "capacity": {
        "anyOf": [
          {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Container capacity",
        "title": "Capacity"
      },
      "contents": {
        "anyOf": [
          {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Items contained in this pack",
        "title": "Contents"
      },
      "stealth_disadvantage": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Stealth disadvantage",
        "title": "Stealth Disadvantage"
      },
      "mechanics": {
        "anyOf": [
          {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Item mechanics",
        "title": "Mechanics"
      }
    },
    "required": [
      "name",
      "cost",
      "source",
      "ruleset",
      "type",
      "category"
    ],
    "title": "Equipment",
    "type": "object"
  },
  "$defs": {
    "ArmorClass": {
      "description": "Armor AC calculation",
      "properties": {
        "base": {
          "description": "Base AC value",
          "title": "Base",
          "type": "integer"
        },
        "dex_bonus": {
          "default": true,
          "description": "Whether Dex applies",
          "title": "Dex Bonus",
          "type": "boolean"
        },
        "max_dex_bonus": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Max Dex bonus",
          "title": "Max Dex Bonus"
        }
      },
      "required": [
        "base"
      ],
      "title": "ArmorClass",
      "type": "object"
    },
    "Currency": {
      "enum": [
        "CP",
        "SP",
        "EP",
        "GP",
        "PP"
      ],
      "title": "Currency",
      "type": "string"
    },
    "CurrencyCost": {
      "description": "Cost in currency.\n\nExample: {\"amount\": 50, \"currency\": \"gp\"}",
      "properties": {
        "amount": {
          "description": "Numeric cost",
          "title": "Amount",
          "type": "number"
        },
        "currency": {
          "$ref": "#/$defs/Currency",
          "description": "Currency: cp, sp, ep, gp, pp"
        }
      },
      "required": [
        "amount",
        "currency"
      ],
      "title": "CurrencyCost",
      "type": "object"
    },
    "Damage": {
      "description": "Weapon damage",
      "properties": {
        "dice": {
          "description": "Damage dice (e.g., '1d6')",
          "title": "Dice",
          "type": "string"
        },
        "type": {
          "description": "Damage type",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/DamageElement"
              },
              {
                "$ref": "#/$defs/DamageType"
              }
            ]
          },
          "title": "Type",
          "type": "array"
        },
        "target": {
          "$ref": "#/$defs/DamageTarget",
          "default": "single",
          "description": "Type of target"
        },
        "versatile": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Versatile damage dice",
          "title": "Versatile"
        },
        "split": {
          "default": false,
          "description": "Whether damage is split among targets",
          "title": "Split",
          "type": "boolean"
        },
        "order": {
          "anyOf": [
            {
              "enum": [
                "ascending",
                "descending"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Target order logistics",
          "title": "Order"
        }
      },
      "required": [
        "dice",
        "type"
      ],
      "title": "Damage",
      "type": "object"
    },
    "DamageElement": {
      "description": "Elemental/magical damage types.",
      "enum": [
        "acid",
        "cold",
        "fire",
        "force",
        "lightning",
        "necrotic",
        "poison",
        "psychic",
        "radiant",
        "thunder"
      ],
      "title": "DamageElement",
      "type": "string"
    },
    "DamageTarget": {
      "enum": [
        "area",
        "single"
      ],
      "title": "DamageTarget",
      "type": "string"
    },
    "DamageType": {
      "description": "Physical damage types.",
      "enum": [
        "bludgeoning",
        "piercing",
        "slashing",
        "falling"
      ],
      "title": "DamageType",
      "type": "string"
    },
    "EquipmentCategory": {
      "description": "High-level equipment categories for filtering.",
      "enum": [
        "weapon",
        "armor",
        "adventuring_gear",
        "container",
        "focus"
      ],
      "title": "EquipmentCategory",
      "type": "string"
    },
    "Ruleset": {
      "enum": [
        "dnd5e_2024",
        "dnd5e",
        "dnd3.5e",
        "pf2e"
      ],
      "title": "Ruleset",
      "type": "string"
    },
    "Source": {
      "enum": [
        "phb",
        "tce",
        "scag",
        "xge"
      ],
      "title": "Source",
      "type": "string"
    }
  }
}