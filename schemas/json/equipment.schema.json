{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "D&D 5e Equipment",
  "type": "array",
  "items": {
    "description": "Equipment item including weapons, armor, and adventuring gear.\n\nThis is a unified model where weapon-specific and armor-specific\nfields are optional. The type field determines what fields are relevant.",
    "properties": {
      "name": {
        "description": "Equipment name",
        "title": "Name",
        "type": "string"
      },
      "cost": {
        "$ref": "common.schema.json#/$defs/CurrencyCost",
        "description": "Cost with currency"
      },
      "weight": {
        "anyOf": [
          {
            "type": "number"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weight in pounds",
        "title": "Weight"
      },
      "source": {
        "$ref": "common.schema.json#/$defs/Source",
        "description": "Source book"
      },
      "ruleset": {
        "$ref": "common.schema.json#/$defs/Ruleset",
        "description": "Ruleset version"
      },
      "type": {
        "description": "Equipment type",
        "title": "Type",
        "type": "string"
      },
      "category": {
        "$ref": "#/$defs/EquipmentCategory",
        "description": "Equipment category"
      },
      "subcategory": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Equipment subcategory",
        "title": "Subcategory"
      },
      "description": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Item description",
        "title": "Description"
      },
      "is_focus": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Can be used as spell focus",
        "title": "Is Focus"
      },
      "damage": {
        "anyOf": [
          {
            "$ref": "common.schema.json#/$defs/Damage"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weapon damage"
      },
      "properties": {
        "anyOf": [
          {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Weapon properties (e.g., 'finesse', 'thrown (20/60)')",
        "title": "Properties"
      },
      "armor_class": {
        "anyOf": [
          {
            "$ref": "#/$defs/ArmorClass"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Armor AC calculation"
      },
      "requirements": {
        "anyOf": [
          {
            "items": {
              "$ref": "common.schema.json#/$defs/AttributeRequirement"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Requirements for using this equipment (e.g., minimum Strength for heavy armor)",
        "title": "Requirements"
      },
      "stealth": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Stealth disadvantage indicator",
        "title": "Stealth"
      },
      "capacity": {
        "anyOf": [
          {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Container capacity",
        "title": "Capacity"
      },
      "contents": {
        "anyOf": [
          {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Items contained in this pack",
        "title": "Contents"
      },
      "stealth_disadvantage": {
        "anyOf": [
          {
            "type": "boolean"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Stealth disadvantage",
        "title": "Stealth Disadvantage"
      },
      "mechanics": {
        "anyOf": [
          {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Item mechanics",
        "title": "Mechanics"
      }
    },
    "required": [
      "name",
      "cost",
      "source",
      "ruleset",
      "type",
      "category"
    ],
    "title": "Equipment",
    "type": "object"
  },
  "$defs": {
    "ArmorClass": {
      "description": "Armor AC calculation",
      "properties": {
        "base": {
          "description": "Base AC value",
          "title": "Base",
          "type": "integer"
        },
        "dex_bonus": {
          "default": true,
          "description": "Whether Dex applies",
          "title": "Dex Bonus",
          "type": "boolean"
        },
        "max_dex_bonus": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Max Dex bonus",
          "title": "Max Dex Bonus"
        }
      },
      "required": [
        "base"
      ],
      "title": "ArmorClass",
      "type": "object"
    },
    "EquipmentCategory": {
      "description": "High-level equipment categories for filtering.",
      "enum": [
        "weapon",
        "armor",
        "adventuring_gear",
        "container",
        "focus"
      ],
      "title": "EquipmentCategory",
      "type": "string"
    }
  }
}
