{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "D&D 5e Backgrounds",
  "type": "array",
  "items": {
    "description": "D&D 5e character background.",
    "properties": {
      "name": {
        "description": "Background name",
        "title": "Name",
        "type": "string"
      },
      "description": {
        "description": "Background description",
        "title": "Description",
        "type": "string"
      },
      "skill_proficiencies": {
        "description": "Skill proficiencies (strings or choice objects)",
        "items": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "additionalProperties": true,
              "type": "object"
            }
          ]
        },
        "title": "Skill Proficiencies",
        "type": "array"
      },
      "tool_proficiencies": {
        "description": "Tool proficiencies (strings like 'any gaming set' or choice objects)",
        "items": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "additionalProperties": true,
              "type": "object"
            }
          ]
        },
        "title": "Tool Proficiencies",
        "type": "array"
      },
      "languages": {
        "description": "Language choices (choice group objects)",
        "items": {
          "additionalProperties": true,
          "type": "object"
        },
        "title": "Languages",
        "type": "array"
      },
      "equipment": {
        "description": "Starting equipment (choice groups of fixed items or player choices)",
        "items": {
          "$ref": "#/$defs/BackgroundEquipmentEntry"
        },
        "title": "Equipment",
        "type": "array"
      },
      "source": {
        "$ref": "common.schema.json#/$defs/Source",
        "description": "Source book"
      },
      "ruleset": {
        "$ref": "common.schema.json#/$defs/Ruleset",
        "description": "Ruleset"
      }
    },
    "required": [
      "name",
      "description",
      "skill_proficiencies",
      "tool_proficiencies",
      "source",
      "ruleset"
    ],
    "title": "Background",
    "type": "object"
  },
  "$defs": {
    "BackgroundEquipmentEntry": {
      "description": "A choice group entry in background starting equipment. Fixed entries grant specific items; choice entries let the player pick from options. Currency entries grant starting gold.",
      "properties": {
        "choice_group": {
          "description": "Groups related items together for display",
          "type": "integer",
          "minimum": 1
        },
        "type": {
          "description": "Whether items are fixed or player-chosen",
          "enum": ["fixed", "choice"],
          "type": "string"
        },
        "items": {
          "description": "Items granted (for fixed type)",
          "items": {
            "$ref": "equipment.schema.json#/$defs/PackItem"
          },
          "type": "array"
        },
        "options": {
          "description": "Items to choose from (for choice type)",
          "items": {
            "$ref": "equipment.schema.json#/$defs/PackItem"
          },
          "type": "array"
        },
        "choose": {
          "description": "Number of options to choose (for choice type)",
          "type": "integer",
          "minimum": 1
        },
        "currency": {
          "$ref": "common.schema.json#/$defs/CurrencyCost",
          "description": "Starting currency granted by this entry"
        }
      },
      "required": ["choice_group", "type"],
      "title": "BackgroundEquipmentEntry",
      "type": "object"
    }
  }
}
